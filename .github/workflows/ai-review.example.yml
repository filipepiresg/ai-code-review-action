# ===============================================
# ü§ñ AI Code Review Action - Workflow de Exemplo
# ===============================================
# Este arquivo demonstra como configurar a AI Code Review Action
# em diferentes cen√°rios de uso.

# ===============================================
# üìÅ LOCALIZA√á√ÉO
# ===============================================
# Salve este arquivo como: .github/workflows/ai-review.yml

# ===============================================
# üöÄ CONFIGURA√á√ÉO B√ÅSICA
# ===============================================
name: AI Code Review

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  ai-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Executar revis√£o com IA
        uses: filipepiresg/ai-code-review-action@v1
        with:
          # Chaves de API (pelo menos uma obrigat√≥ria)
          openai_api_key: ${{ secrets.OPENAI_API_KEY }}
          claude_api_key: ${{ secrets.CLAUDEAI_API_KEY }}

          # Configura√ß√µes do GitHub
          github_token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.repository }}
          pr_number: ${{ github.event.pull_request.number }}

          # Configura√ß√µes de an√°lise
          analyze_limit: 10
          model: gpt-5

          # Padr√µes de ignore (opcional)
          ignore_file_content: |
            ^src/__tests__/
            ^node_modules/
            \.{test,spec}.{j,t}s?(x)$
            \.json$
            \.lock$

          # Arquivo de ignore (opcional)
          ignore_file_path: ".ai-review-ignore"
# ===============================================
# üîß CONFIGURA√á√ÉO AVAN√áADA
# ===============================================
# Para projetos grandes ou com necessidades espec√≠ficas:

# name: AI Code Review Advanced
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#     paths:
#       - 'src/**'
#       - 'lib/**'
#       - 'app/**'
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#
#     steps:
#       - name: Executar revis√£o com IA
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           # Chaves de API
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           claude_api_key: ${{ secrets.CLAUDEAI_API_KEY }}
#
#           # Configura√ß√µes do GitHub
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#
#           # Configura√ß√µes de an√°lise otimizadas
#           analyze_limit: 20
#           model: gpt-4-turbo
#
#           # Padr√µes de ignore espec√≠ficos do projeto
#           ignore_file_content: |
#             ^src/__tests__/
#             ^src/__mocks__/
#             ^src/vendor/
#             ^node_modules/
#             ^dist/
#             ^build/
#             \.{test,spec,mock}.{j,t}s?(x)$
#             \.json$
#             \.lock$
#             \.min\.js$
#             \.bundle\.js$
#
#           # Arquivo de ignore personalizado
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üéØ CONFIGURA√á√ÉO PARA PYTHON
# ===============================================
# Otimizada para projetos Python:

# name: AI Code Review Python
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#     paths:
#       - '**/*.py'
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#
#     steps:
#       - name: Executar revis√£o com IA
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 15
#           model: gpt-5
#           ignore_file_content: |
#             ^tests/
#             ^test/
#             ^__tests__/
#             ^__pycache__/
#             ^venv/
#             ^env/
#             ^\.pytest_cache/
#             ^coverage/
#             \.pyc$
#             \.pyo$
#             \.pyd$
#             \_test\.py$
#             \_spec\.py$
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üéØ CONFIGURA√á√ÉO PARA JAVASCRIPT/TYPESCRIPT
# ===============================================
# Otimizada para projetos Node.js/React:

# name: AI Code Review JavaScript
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#     paths:
#       - 'src/**'
#       - 'lib/**'
#       - 'components/**'
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#
#     steps:
#       - name: Executar revis√£o com IA
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 12
#           model: gpt-4-turbo
#           ignore_file_content: |
#             ^src/__tests__/
#             ^src/__mocks__/
#             ^src/test/
#             ^src/tests/
#             ^node_modules/
#             ^dist/
#             ^build/
#             ^coverage/
#             \.{test,spec,mock}.{j,t}s?(x)$
#             \.min\.js$
#             \.bundle\.js$
#             \.chunk\.js$
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üîí CONFIGURA√á√ÉO COM CLAUDE APENAS
# ===============================================
# Para usar apenas Claude (sem OpenAI):

# name: AI Code Review Claude Only
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#
#     steps:
#       - name: Executar revis√£o com Claude
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           claude_api_key: ${{ secrets.CLAUDEAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 8
#           model: claude-sonnet-4-5
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# ‚ö° CONFIGURA√á√ÉO OTIMIZADA PARA PERFORMANCE
# ===============================================
# Para projetos com muitos arquivos:

# name: AI Code Review Performance
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#
#     steps:
#       - name: Executar revis√£o com IA
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 5  # Limite menor para performance
#           model: gpt-4-turbo  # Modelo mais r√°pido
#           ignore_file_content: |
#             ^.*test.*/
#             ^.*spec.*/
#             ^.*mock.*/
#             ^node_modules/
#             ^vendor/
#             ^dist/
#             ^build/
#             ^coverage/
#             \.{test,spec,mock,min,bundle,chunk}\.
#             \.json$
#             \.lock$
#             \.log$
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üìã CONFIGURA√á√ÉO COM M√öLTIPLOS JOBS
# ===============================================
# Para an√°lise em paralelo por tipo de arquivo:

# name: AI Code Review Multi-Job
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#
# jobs:
#   review-backend:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#     if: contains(github.event.pull_request.changed_files, '.py') || contains(github.event.pull_request.changed_files, '.java')
#
#     steps:
#       - name: Revisar c√≥digo backend
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 8
#           model: gpt-5
#           ignore_file_content: |
#             ^tests/
#             ^test/
#             ^__pycache__/
#             ^target/
#             \.pyc$
#             \.class$
#           ignore_file_path: ".ai-review-ignore"
#
#   review-frontend:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#     if: contains(github.event.pull_request.changed_files, '.js') || contains(github.event.pull_request.changed_files, '.ts')
#
#     steps:
#       - name: Revisar c√≥digo frontend
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 8
#           model: gpt-4-turbo
#           ignore_file_content: |
#             ^src/__tests__/
#             ^src/__mocks__/
#             ^node_modules/
#             ^dist/
#             \.{test,spec,mock}\.
#             \.min\.js$
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üîß CONFIGURA√á√ÉO COM CONDI√á√ïES
# ===============================================
# Para executar apenas em certas condi√ß√µes:

# name: AI Code Review Conditional
#
# on:
#   pull_request:
#     types: [opened, synchronize, reopened]
#
# jobs:
#   ai-review:
#     runs-on: ubuntu-latest
#     permissions:
#       contents: read
#       pull-requests: write
#     # Executa apenas se o PR tem mais de 5 arquivos modificados
#     if: github.event.pull_request.changed_files > 5
#
#     steps:
#       - name: Executar revis√£o com IA
#         uses: filipepiresg/ai-code-review-action@v1
#         with:
#           openai_api_key: ${{ secrets.OPENAI_API_KEY }}
#           github_token: ${{ secrets.GITHUB_TOKEN }}
#           repository: ${{ github.repository }}
#           pr_number: ${{ github.event.pull_request.number }}
#           analyze_limit: 10
#           model: gpt-5
#           ignore_file_path: ".ai-review-ignore"

# ===============================================
# üìù NOTAS IMPORTANTES
# ===============================================
#
# 1. **Secrets**: Configure as chaves de API em Settings > Secrets > Actions
# 2. **Permiss√µes**: Certifique-se de que o token tem permiss√£o para comentar em PRs
# 3. **Limites**: Ajuste analyze_limit baseado no tamanho do seu projeto
# 4. **Modelos**: Escolha o modelo baseado na sua necessidade (velocidade vs qualidade)
# 5. **Ignore**: Use ignore_file_path para padr√µes complexos, ignore_file_content para simples
# 6. **Performance**: Para projetos grandes, considere usar paths para limitar arquivos
# 7. **Cache**: O sistema de cache √© autom√°tico e melhora performance significativamente
#
# ===============================================
# üÜò TROUBLESHOOTING
# ===============================================
#
# - **Erro de chave**: Verifique se as secrets est√£o configuradas corretamente
# - **Arquivo n√£o encontrado**: Verifique o caminho do ignore_file_path
# - **Regex inv√°lida**: Teste seus padr√µes em ignore_file_content
# - **Limite excedido**: Ajuste analyze_limit se necess√°rio
# - **Performance lenta**: Use cache e ajuste limites
#
# ===============================================
# üìö DOCUMENTA√á√ÉO COMPLETA
# ===============================================
#
# Para mais informa√ß√µes, consulte:
# - README.md: Documenta√ß√£o principal
# - DOCUMENTATION.md: Documenta√ß√£o t√©cnica detalhada
# - .ai-review-ignore.example: Exemplos de padr√µes de ignore
#
# ===============================================
# ü§ù SUPORTE
# ===============================================
#
# - Issues: https://github.com/filipepiresg/ai-code-review-action/issues
# - Discussions: https://github.com/filipepiresg/ai-code-review-action/discussions
# - Contato: @filipepiresg
